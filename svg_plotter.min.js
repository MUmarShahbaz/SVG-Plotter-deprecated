"use strict";function SVG_GENERATOR(t,e,n){const i="http://www.w3.org/2000/svg",o=t.dimensions,r=t.grid.gaps,a=t.grid.lines,s=t.series,l=t.series.point,d=t.series.fill;let c=e.series,u=e.grid.x,m=e.grid.y;const g={top:o.margins.top,left:o.margins.left,bottom:o.margins.top+o.height.plot,right:o.margins.left+o.width.plot};function p(t,e){const n=Math.floor(t/1e3),i=t%1e3,o=n%60,r=Math.floor(n/60%60),a=Math.floor(n/3600%24),s=Math.floor(n/86400);switch(e){case"ms":return`${t}ms`;case"s.ms":return`${n}.${i.toString().padStart(3,"0")}s`;case"m:s":return`${r}:${o.toString().padStart(2,"0")}`;case"h:m:s":return`${a}:${r.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`;case"d-h:m":return`${s}-${a.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`}}function h(t,e,n,i,o){return(t-e)/(n-e)*(o-i)+i}function b(t,e=null){return null===e?h(t,m.ticks.min,m.ticks.max,g.bottom,g.top):function(t,e,n,i,o,r){const a=t=>Math.log(t)/Math.log(r),s=a(e),l=a(n);return(a(t)-s)/(l-s)*(o-i)+i}(t,m.ticks.min,m.ticks.max,g.bottom,g.top,e)}function f(t){return h(t,u.ticks.min,u.ticks.max,g.left,g.right)}function S(t,e){let n=t.replace("#","");3===n.length&&(n=n.split("").map(t=>t+t).join(""));const[i,o,r]=[0,2,4].map(t=>parseInt(n.slice(t,t+2),16));return`rgba(${i}, ${o}, ${r}, ${e})`}function A(t,e,n,o,r,a){const s=document.createElementNS(i,"line");return s.setAttribute("x1",t.toString()),s.setAttribute("x2",e.toString()),s.setAttribute("y1",n.toString()),s.setAttribute("y2",o.toString()),s.setAttribute("stroke",r),s.setAttribute("stroke-width",a.toString()),s}function x(t,e,n,o){const r=document.createElementNS(i,"circle");return r.setAttribute("cx",t.toString()),r.setAttribute("cy",e.toString()),r.setAttribute("r",n.toString()),r.setAttribute("fill",o),r.setAttribute("stroke","white"),r.setAttribute("stroke-width","2"),r}function C(t,e,n,o,r){const a=document.createElementNS(i,"polygon"),s=[`${t},${n}`,`${e},${o}`,`${e},${g.bottom}`,`${t},${g.bottom}`].join(" ");return a.setAttribute("points",s),a.setAttribute("fill",r),a}function $(t=!0){var e,s,l;const d=document.createElementNS(i,"g");d.setAttribute("id",`${n}_grid`);const c=document.createElementNS(i,"g"),h="val"===r.x.gap_by?r.x.val:u.ticks.range/(o.width.plot/r.x.val);for(let t=u.ticks.min;t<=u.ticks.max;t+=h){const e=document.createElementNS(i,"g");e.appendChild(A(f(t),f(t),g.bottom,g.top,S(a.main.color,1),a.main.width));const n=document.createElementNS(i,"text");n.setAttribute("x",f(t).toString()),n.setAttribute("y",(g.bottom+20).toString()),n.setAttribute("font-size",a.font.size.toString()),n.setAttribute("text-anchor","middle"),n.setAttribute("fill",a.font.color),n.textContent="linear"===u.type?t.toFixed(2).toString():p(Math.floor(t),u.time_format),e.appendChild(n),c.appendChild(e)}d.appendChild(c);const x=document.createElementNS(i,"g");if("linear"===m.type){const t="val"===r.y.gap_by?r.y.val:m.ticks.range/(o.height.plot/r.y.val);for(let e=m.ticks.min;e<=m.ticks.max;e+=t){const t=document.createElementNS(i,"g");t.appendChild(A(g.left,g.right,b(e),b(e),S(a.main.color,1),a.main.width));const n=document.createElementNS(i,"text");n.setAttribute("x",(g.left-10).toString()),n.setAttribute("y",b(e).toString()),n.setAttribute("font-size",a.font.size.toString()),n.setAttribute("text-anchor","end"),n.setAttribute("fill",a.font.color),n.textContent=e.toFixed(2).toString(),t.appendChild(n),x.appendChild(t)}}else{for(let t=m.ticks.min;t<=m.ticks.max;t*=m.base){const e=document.createElementNS(i,"g");e.appendChild(A(g.left,g.right,b(t,m.base),b(t,m.base),S(a.main.color,1),a.main.width));const n=document.createElementNS(i,"text");if(n.setAttribute("x",(g.left-10).toString()),n.setAttribute("y",b(t,m.base).toString()),n.setAttribute("font-size",a.font.size.toString()),n.setAttribute("text-anchor","end"),n.setAttribute("fill",a.font.color),n.textContent=Math.trunc(t).toString(),e.appendChild(n),x.appendChild(e),10===m.base&&t!=m.ticks.min){const e=t/10;for(let n=2*e;n<t;n+=e){if(b(n,m.base)>g.bottom)continue;const t=document.createElementNS(i,"g");t.appendChild(A(g.left,g.right,b(n,m.base),b(n,m.base),S(a.main.color,1),a.main.width));const e=document.createElementNS(i,"text");e.setAttribute("x",(g.left-10).toString()),e.setAttribute("y",b(n,m.base).toString()),e.setAttribute("font-size",a.font.size.toString()),e.setAttribute("text-anchor","end"),e.setAttribute("fill",a.font.color),e.textContent=Math.trunc(n).toString(),t.appendChild(e),x.appendChild(t)}}}if(10===m.base){let t=m.ticks.min;for(;t<m.ticks.max;)t*=10;const e=t/10;for(let n=2*e;n<t;n+=e){if(b(n,m.base)>g.bottom||b(n,m.base)<g.top)continue;const t=document.createElementNS(i,"g");t.appendChild(A(g.left,g.right,b(n,m.base),b(n,m.base),S(a.main.color,1),a.main.width));const e=document.createElementNS(i,"text");e.setAttribute("x",(g.left-10).toString()),e.setAttribute("y",b(n,m.base).toString()),e.setAttribute("font-size",a.font.size.toString()),e.setAttribute("text-anchor","end"),e.setAttribute("fill",a.font.color),e.textContent=Math.trunc(n).toString(),t.appendChild(e),x.appendChild(t)}}}d.appendChild(x);const C=document.createElementNS(i,"g");return C.appendChild(A(g.left,g.right,g.bottom,g.bottom,S(a.axes.color,1),a.axes.width)),C.appendChild(A(g.left,g.left,g.bottom,g.top,S(a.axes.color,1),a.axes.width)),d.appendChild(C),t&&(null===(s=null===(e=document.getElementById(n))||void 0===e?void 0:e.querySelector(`#${n}_grid`))||void 0===s||s.remove(),null===(l=document.getElementById(n))||void 0===l||l.appendChild(d)),d}return{id:n,data:e,config:t,init:function(e=!1){const r=document.createElementNS(i,"svg");if(r.setAttribute("width",o.width.image.toString()),r.setAttribute("height",o.height.image.toString()),r.setAttribute("viewBox",`0 0 ${o.width.image} ${o.height.image}`),r.setAttribute("id",n),null!==t.bg){const e=document.createElementNS(i,"rect");e.setAttribute("width",o.width.image.toString()),e.setAttribute("height",o.height.image.toString()),e.setAttribute("fill",t.bg),r.appendChild(e)}return e&&e.appendChild(r),r},updateGrid:$,updateData:function(t=!0,o=!1,r=!1){var a,g,p;o&&(e=o,c=o.series,u=o.grid.x,m=o.grid.y),r&&$();const h=document.createElementNS(i,"g");h.setAttribute("id",`${n}_datasets`);for(let t=0;t<c.length;t++){const e=document.createElementNS(i,"g");e.setAttribute("id",`${n}_dataset_${t}`);const o=document.createElementNS(i,"g");for(let e=0;e<c[t].data.length-1;e++){const n=u.ticks.raw[e],i=u.ticks.raw[e+1],r=c[t].data[e],a=c[t].data[e+1],g=S(c[t].color,s.alpha);if(null!==r&&null!==a){if(o.appendChild(A(f(n),f(i),b(r,m.base),b(a,m.base),g,s.width)),null!==d){const e=S(c[t].color,d.alpha);o.appendChild(C(f(n),f(i),b(r,m.base),b(a,m.base),e))}if(null!==l){const s=S(c[t].color,l.alpha);o.appendChild(x(f(n),b(r,m.base),l.radius,s)),e===c[t].data.length-2&&o.appendChild(x(f(i),b(a,m.base),l.radius,s))}}}e.appendChild(o),h.appendChild(e)}return t&&(null===(g=null===(a=document.getElementById(n))||void 0===a?void 0:a.querySelector(`#${n}_datasets`))||void 0===g||g.remove(),null===(p=document.getElementById(n))||void 0===p||p.appendChild(h)),h}}}