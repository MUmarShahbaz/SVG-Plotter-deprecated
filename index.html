<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced SVG Plotter Demo</title>
    <script src="https://cdn.jsdelivr.net/gh/MUmarShahbaz/SVG-Plotter-deprecated@dist/svg_plotter.min.js"></script>
    <style>
        /* Bootstrap CSS - Core Styles */
        *,
        *::before,
        *::after {
            box-sizing: border-box;
        }

        /* Bootstrap Container */
        .container {
            --bs-gutter-x: 1.5rem;
            --bs-gutter-y: 0;
            width: 100%;
            padding-right: calc(var(--bs-gutter-x) * 0.5);
            padding-left: calc(var(--bs-gutter-x) * 0.5);
            margin-right: auto;
            margin-left: auto;
        }

        @media (min-width: 576px) {
            .container {
                max-width: 540px;
            }
        }

        @media (min-width: 768px) {
            .container {
                max-width: 720px;
            }
        }

        @media (min-width: 992px) {
            .container {
                max-width: 960px;
            }
        }

        @media (min-width: 1200px) {
            .container {
                max-width: 1140px;
            }
        }

        @media (min-width: 1400px) {
            .container {
                max-width: 1320px;
            }
        }

        /* Bootstrap Button Base */
        .btn {
            --bs-btn-padding-x: 0.75rem;
            --bs-btn-padding-y: 0.375rem;
            --bs-btn-font-family: inherit;
            --bs-btn-font-size: 1rem;
            --bs-btn-font-weight: 400;
            --bs-btn-line-height: 1.5;
            --bs-btn-color: #212529;
            --bs-btn-bg: transparent;
            --bs-btn-border-width: 1px;
            --bs-btn-border-color: transparent;
            --bs-btn-border-radius: 0.375rem;
            --bs-btn-hover-border-color: transparent;
            --bs-btn-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.15), 0 1px 1px rgba(0, 0, 0, 0.075);
            --bs-btn-disabled-opacity: 0.65;
            --bs-btn-focus-box-shadow: 0 0 0 0.25rem rgba(var(--bs-btn-focus-shadow-rgb), 0.5);
            display: inline-block;
            padding: var(--bs-btn-padding-y) var(--bs-btn-padding-x);
            font-family: var(--bs-btn-font-family);
            font-size: var(--bs-btn-font-size);
            font-weight: var(--bs-btn-font-weight);
            line-height: var(--bs-btn-line-height);
            color: var(--bs-btn-color);
            text-align: center;
            text-decoration: none;
            vertical-align: middle;
            cursor: pointer;
            user-select: none;
            border: var(--bs-btn-border-width) solid var(--bs-btn-border-color);
            border-radius: var(--bs-btn-border-radius);
            background-color: var(--bs-btn-bg);
            transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
        }

        .btn:hover {
            color: var(--bs-btn-hover-color);
            background-color: var(--bs-btn-hover-bg);
            border-color: var(--bs-btn-hover-border-color);
        }

        .btn:focus-visible {
            color: var(--bs-btn-hover-color);
            background-color: var(--bs-btn-hover-bg);
            border-color: var(--bs-btn-hover-border-color);
            outline: 0;
            box-shadow: var(--bs-btn-focus-box-shadow);
        }

        .btn:disabled {
            color: var(--bs-btn-disabled-color);
            pointer-events: none;
            background-color: var(--bs-btn-disabled-bg);
            border-color: var(--bs-btn-disabled-border-color);
            opacity: var(--bs-btn-disabled-opacity);
        }

        /* Bootstrap Button Variants */
        .btn-primary {
            --bs-btn-color: #fff;
            --bs-btn-bg: #0d6efd;
            --bs-btn-border-color: #0d6efd;
            --bs-btn-hover-color: #fff;
            --bs-btn-hover-bg: #0b5ed7;
            --bs-btn-hover-border-color: #0a58ca;
            --bs-btn-focus-shadow-rgb: 49, 132, 253;
            --bs-btn-active-color: #fff;
            --bs-btn-active-bg: #0a58ca;
            --bs-btn-active-border-color: #0a53be;
            --bs-btn-disabled-color: #fff;
            --bs-btn-disabled-bg: #0d6efd;
            --bs-btn-disabled-border-color: #0d6efd;
        }

        .btn-success {
            --bs-btn-color: #fff;
            --bs-btn-bg: #198754;
            --bs-btn-border-color: #198754;
            --bs-btn-hover-color: #fff;
            --bs-btn-hover-bg: #157347;
            --bs-btn-hover-border-color: #146c43;
            --bs-btn-focus-shadow-rgb: 60, 153, 110;
            --bs-btn-active-color: #fff;
            --bs-btn-active-bg: #146c43;
            --bs-btn-active-border-color: #13653f;
            --bs-btn-disabled-color: #fff;
            --bs-btn-disabled-bg: #198754;
            --bs-btn-disabled-border-color: #198754;
        }

        .btn-warning {
            --bs-btn-color: #000;
            --bs-btn-bg: #ffc107;
            --bs-btn-border-color: #ffc107;
            --bs-btn-hover-color: #000;
            --bs-btn-hover-bg: #ffca2c;
            --bs-btn-hover-border-color: #ffc720;
            --bs-btn-focus-shadow-rgb: 217, 164, 6;
            --bs-btn-active-color: #000;
            --bs-btn-active-bg: #ffcd39;
            --bs-btn-active-border-color: #ffc720;
            --bs-btn-disabled-color: #000;
            --bs-btn-disabled-bg: #ffc107;
            --bs-btn-disabled-border-color: #ffc107;
        }

        .btn-info {
            --bs-btn-color: #000;
            --bs-btn-bg: #0dcaf0;
            --bs-btn-border-color: #0dcaf0;
            --bs-btn-hover-color: #000;
            --bs-btn-hover-bg: #31d2f2;
            --bs-btn-hover-border-color: #25cff2;
            --bs-btn-focus-shadow-rgb: 11, 172, 204;
            --bs-btn-active-color: #000;
            --bs-btn-active-bg: #3dd5f3;
            --bs-btn-active-border-color: #25cff2;
            --bs-btn-disabled-color: #000;
            --bs-btn-disabled-bg: #0dcaf0;
            --bs-btn-disabled-border-color: #0dcaf0;
        }

        .btn-danger {
            --bs-btn-color: #fff;
            --bs-btn-bg: #dc3545;
            --bs-btn-border-color: #dc3545;
            --bs-btn-hover-color: #fff;
            --bs-btn-hover-bg: #bb2d3b;
            --bs-btn-hover-border-color: #b02a37;
            --bs-btn-focus-shadow-rgb: 225, 83, 97;
            --bs-btn-active-color: #fff;
            --bs-btn-active-bg: #b02a37;
            --bs-btn-active-border-color: #a52834;
            --bs-btn-disabled-color: #fff;
            --bs-btn-disabled-bg: #dc3545;
            --bs-btn-disabled-border-color: #dc3545;
        }

        /* Bootstrap Utility Classes */
        .mb-0 {
            margin-bottom: 0 !important;
        }

        /* Custom Styles */
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            line-height: 1.5;
        }
        .main-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            margin: 20px auto;
            padding: 30px;
        }
        .chart-container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }
        .controls {
            margin-bottom: 25px;
        }
        .btn-custom {
            margin: 5px;
            border-radius: 25px;
            padding: 8px 20px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        .btn-custom:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        .data-info {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
            font-weight: 300;
        }
        .feature-highlight {
            background: linear-gradient(45deg, #3498db, #2ecc71);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="main-container">
            <h1>ðŸš€ Advanced SVG Plotter Demo</h1>
            
            <div class="navigation-links" style="text-align: center; margin-bottom: 20px;">
                <a href="demo2.html" class="btn btn-primary btn-custom">ðŸ“Š Demo 2</a>
                <a href="test.html" class="btn btn-info btn-custom">ðŸ§ª Test Page</a>
            </div>

            <div class="feature-highlight">
                <h5>âœ¨ Features Demonstrated:</h5>
                <ul class="mb-0">
                    <li>Multiple data series with different colors</li>
                    <li>Interactive data updates</li>
                    <li>Real-time oscilloscope simulation</li>
                    <li>Customizable chart appearance</li>
                    <li>Responsive design</li>
                </ul>
            </div>

            <div class="controls">
                <button class="btn btn-primary btn-custom" onclick="updateWithSineWave()">
                    ðŸ“ˆ Sine Wave
                </button>
                <button class="btn btn-success btn-custom" onclick="updateWithRandomData()">
                    ðŸŽ² Random Data
                </button>
                <button class="btn btn-warning btn-custom" onclick="updateWithOscilloscope()">
                    ðŸ“Ÿ Oscilloscope Simulation
                </button>
                <button class="btn btn-info btn-custom" onclick="addNewSeries()">
                    âž• Add Series
                </button>
                <button class="btn btn-danger btn-custom" onclick="resetChart()">
                    ðŸ”„ Reset
                </button>
            </div>

            <div class="chart-container" id="chart-container"></div>
            
            <div class="data-info">
                <h6>ðŸ“Š Current Data Info:</h6>
                <div id="data-info">Loading chart...</div>
            </div>
        </div>
    </div>

    <script>
        // Global chart variable
        let chart;
        let animationId;
        
        // Enhanced data with multiple series
        const baseData = {
            title: "Advanced Multi-Series Chart",
            grid: {
                x: {
                    title: "Time (s)",
                    type: "linear",
                    ticks: {
                        raw: Array.from({length: 101}, (_, i) => (i / 100) * 10), // 0 to 10 with 101 points
                        formatted: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map(String), // Only show major ticks
                        min: 0,
                        max: 10,
                        range: 10
                    },
                    time_format: null
                },
                y: {
                    title: "Amplitude",
                    type: "linear",
                    ticks: {
                        min: -100,
                        max: 100,
                        range: 200
                    },
                    base: null
                }
            },
            series: [
                {
                    label: "Signal A",
                    color: "#e74c3c",
                    data: []
                },
                {
                    label: "Signal B", 
                    color: "#3498db",
                    data: []
                },
                {
                    label: "Signal C",
                    color: "#2ecc71", 
                    data: []
                }
            ]
        };

        // Enhanced configuration with better styling
        const config = {
            bg: "#ffffff",
            dimensions: {
                width: { image: 900, plot: 750 },
                height: { image: 500, plot: 350 },
                margins: { left: 80, right: 80, top: 60, bottom: 80 }
            },
            grid: {
                gaps: {
                    x: { gap_by: "val", val: 1 },
                    y: { gap_by: "val", val: 20 }
                },
                lines: {
                    axes: { color: "#2c3e50", width: 2 },
                    main: { color: "#ecf0f1", width: 1 },
                    font: { color: "#2c3e50", size: 12 }
                }
            },
            series: {
                width: 3,
                alpha: 0.8,
                point: null,
                fill: { alpha: 0.1 }
            }
        };

        // Utility functions for generating different data patterns
        function generateSineWave(frequency = 1, amplitude = 80, phase = 0, points = 101) {
            const data = [];
            for (let i = 0; i < points; i++) {
                const x = (i / (points - 1)) * 10; // 0 to 10
                const y = amplitude * Math.sin(2 * Math.PI * frequency * x / 10 + phase);
                data.push(y);
            }
            return data;
        }

        function generateRandomData(points = 101, min = -80, max = 80) {
            const data = [];
            // For smoother random data, use interpolation between fewer random points
            const keyPoints = 15;
            const randomValues = [];
            for (let i = 0; i < keyPoints; i++) {
                randomValues.push(Math.random() * (max - min) + min);
            }
            
            // Interpolate between key points for smoother curves
            for (let i = 0; i < points; i++) {
                const keyIndex = (i / (points - 1)) * (keyPoints - 1);
                const lowerIndex = Math.floor(keyIndex);
                const upperIndex = Math.min(lowerIndex + 1, keyPoints - 1);
                const t = keyIndex - lowerIndex;
                
                const interpolated = randomValues[lowerIndex] * (1 - t) + randomValues[upperIndex] * t;
                data.push(interpolated);
            }
            return data;
        }

        function generateSquareWave(frequency = 1, amplitude = 70, phase = 0, points = 101) {
            const data = [];
            for (let i = 0; i < points; i++) {
                const x = (i / (points - 1)) * 10;
                const y = amplitude * Math.sign(Math.sin(2 * Math.PI * frequency * x / 10 + phase));
                data.push(y);
            }
            return data;
        }

        // Initialize chart with sample data
        function initializeChart() {
            const data = { ...baseData };
            data.series[0].data = generateSineWave(1, 80, 0, 101);
            data.series[1].data = generateSineWave(2, 60, Math.PI / 4, 101);
            data.series[2].data = generateSineWave(0.5, 90, Math.PI / 2, 101);

            chart = SVG_GENERATOR(config, data, "advanced-chart");
            const container = document.getElementById('chart-container');
            chart.init(container);
            chart.updateGrid();
            chart.updateData();
            
            updateDataInfo(data);
        }

        // Update data info display
        function updateDataInfo(data) {
            const infoDiv = document.getElementById('data-info');
            let html = `<strong>Series Count:</strong> ${data.series.length}<br>`;
            data.series.forEach((series, index) => {
                const avg = (series.data.reduce((a, b) => a + b, 0) / series.data.length).toFixed(2);
                const max = Math.max(...series.data).toFixed(2);
                const min = Math.min(...series.data).toFixed(2);
                html += `<span style="color: ${series.color}">â– </span> <strong>${series.label}:</strong> Avg: ${avg}, Max: ${max}, Min: ${min}<br>`;
            });
            infoDiv.innerHTML = html;
        }

        // Interactive update functions
        function updateWithSineWave() {
            const data = { ...baseData };
            data.title = "Sine Wave Harmonics - High Resolution";
            data.series[0].data = generateSineWave(1, 80, 0, 101);
            data.series[1].data = generateSineWave(3, 40, 0, 101);
            data.series[2].data = generateSineWave(5, 20, 0, 101);
            
            chart.updateData(true, data);
            updateDataInfo(data);
        }

        function updateWithRandomData() {
            const data = { ...baseData };
            data.title = "Random Data Comparison - High Resolution";
            data.series[0].data = generateRandomData(101, -90, 90);
            data.series[1].data = generateRandomData(101, -70, 70);
            data.series[2].data = generateRandomData(101, -50, 50);
            
            chart.updateData(true, data);
            updateDataInfo(data);
        }

        function updateWithOscilloscope() {
            if (animationId) {
                cancelAnimationFrame(animationId);
            }
            
            let phase = 0;
            let lastTime = 0;
            const targetFPS = 60; // Target 60 FPS for smooth animation
            const frameInterval = 1000 / targetFPS;
            
            function animate(currentTime) {
                if (currentTime - lastTime >= frameInterval) {
                    const data = { ...baseData };
                    data.title = "Real-time Oscilloscope Simulation - High Speed";
                    
                    // Faster phase increment for more dynamic animation
                    data.series[0].data = generateSineWave(2, 70, phase, 101);
                    data.series[1].data = generateSquareWave(1.5, 60, phase * 0.8, 101); // Add phase to square wave
                    data.series[2].data = generateSineWave(3, 50, phase * 1.5, 101);
                    
                    chart.updateData(true, data);
                    updateDataInfo(data);
                    
                    // Increased phase increment for faster oscillation
                    phase += 0.3;
                    lastTime = currentTime;
                }
                
                animationId = requestAnimationFrame(animate);
            }
            animate(0);
        }

        function addNewSeries() {
            const data = { ...baseData };
            const colors = ["#9b59b6", "#f39c12", "#1abc9c", "#e67e22", "#34495e"];
            const newColor = colors[Math.floor(Math.random() * colors.length)];
            
            data.series.push({
                label: `Signal ${String.fromCharCode(65 + data.series.length)}`,
                color: newColor,
                data: generateSineWave(Math.random() * 3 + 0.5, Math.random() * 60 + 30, Math.random() * Math.PI * 2, 101)
            });
            
            chart.updateData(true, data);
            updateDataInfo(data);
        }

        function resetChart() {
            if (animationId) {
                cancelAnimationFrame(animationId);
                animationId = null;
            }
            initializeChart();
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeChart();
        });
    </script>
</body>
</html>